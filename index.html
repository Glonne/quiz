<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã€ç¨ç­‰ã€‘é˜¿é‡Œæ›¼æµ‹è¯•</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #f4f4f4;
      margin: 0;
    }
    .container {
      width: 80%;
      max-width: 700px;
      text-align: center;
    }
    .intro-text {
      font-size: 20px;
      line-height: 1.6;
      margin-bottom: 20px;
    }
    .question-section {
      display: none;
      margin-top: 20px;
    }
    .question-section.active {
      display: block;
    }
    .question {
      margin-top: 20px;
      text-align: left;
    }
    .question label {
      display: block;
      margin: 8px 0;
      cursor: pointer;
    }
    .question input {
      margin-right: 10px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    .progress {
      margin-bottom: 20px;
      font-size: 18px;
      color: #666;
    }
    .feedback {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      text-align: left;
    }
    .feedback.correct {
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
    }
    .feedback.incorrect {
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
    }
    .final-score {
      font-size: 24px;
      margin: 20px 0;
      padding: 20px;
      background-color: #e7f3ff;
      border-radius: 10px;
    }
    video {
      max-width: 100%;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ä»‹ç»é¡µé¢ -->
    <div id="intro-section">
      <div class="intro-text">
        å›¢é˜Ÿæ‰¿ä¼¤åˆ†ä¸ºä¸‰æ¬¡ã€‚<br>
        ç¬¬ä¸€æ¬¡æŒ‰ç…§æ ‡è®°ï¼Œæ¯æ¬¡æ‰¿ä¼¤ç«™åœ¨æ‰¿ä¼¤åœˆçš„åœ†å¿ƒå¤„æ–¹ä¾¿åˆ¤æ–­ä¸‹æ¬¡æ‰¿ä¼¤ä½ç½®ã€‚<br>
        ç¬¬äºŒæ¬¡ã€ç¬¬ä¸‰æ¬¡æŒ‰ç…§å·¦å³è¡ŒåŠ¨ã€‚<br>
        1ã€å·¦å›ºå®šå‘å·¦<br>
        2ã€å³å¦‚æœè„šä¸‹æœ‰åœˆåˆ™ä¸åŠ¨ï¼Œå¦‚æœæ— åœˆå‘å³ã€‚<br>
      </div>
      <button onclick="startQuiz()">å¼€å§‹ç­”é¢˜</button>
    </div>

    <!-- é¢˜ç›®åŒºåŸŸï¼ˆåŠ¨æ€ç”Ÿæˆï¼‰ -->
    <div id="quiz-section" style="display: none;">
      <div class="progress" id="progress"></div>
      <div id="question-area"></div>
      <button id="submit-btn" onclick="submitAnswer()">æäº¤ç­”æ¡ˆ</button>
      <button id="next-btn" onclick="nextQuestion()" style="display: none;">ä¸‹ä¸€é¢˜</button>
      <div id="feedback-area"></div>
    </div>

    <!-- æœ€ç»ˆç»“æœ -->
    <div id="result-section" style="display: none;">
      <div class="final-score" id="final-score"></div>
      <button onclick="restartQuiz()">é‡æ–°ç­”é¢˜</button>
    </div>
  </div>

  <script>
    // ========== é¢˜ç›®é…ç½®åŒºåŸŸ ==========
    // åœ¨è¿™é‡Œæ·»åŠ æ–°é¢˜ç›®ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ ¼å¼ï¼š
    const quizData = [
      {
        video: "1.mp4",  // è§†é¢‘æ–‡ä»¶è·¯å¾„
        question: "é—®é¢˜ 1ï¼šæœ¬æ¬¡æ‰¿ä¼¤ä»»åŠ¡åˆ†é…ä¸ºï¼šå‡­çŸ¥å³ï¼Œæ£ æ´²æ´²å·¦ï¼Œå°çŸ¥æ„å³ï¼Œè‹¥å³è‹¥ç¦»å·¦ã€‚é‚£ä¹ˆè§†é¢‘ä¸­è°ç«™é”™äº†ï¼Ÿï¼ˆå¤šé€‰ï¼‰",
        options: [
          { id: "a1", label: "å‡­çŸ¥" },
          { id: "a2", label: "æ£ æ´²æ´²" },
          { id: "a3", label: "å°çŸ¥æ„" },
          { id: "a4", label: "è‹¥å³è‹¥ç¦»" }
        ],
        correctAnswers: ["a1", "a2"],  // æ­£ç¡®ç­”æ¡ˆ
        explanation: "æœ¬æ¬¡æ‰¿ä¼¤åœˆåˆ†è£‚ä¸ºå·¦è¾¹+åŸåœ°ã€‚å·¦è¾¹çš„äººå‘å·¦ï¼Œå³çš„äººåŸåœ°ï¼Œæ‰€ä»¥è§†é¢‘ä¸­çŠ¯é”™çš„äººæ˜¯å‡­çŸ¥å’Œæ£ æ´²æ´²ã€‚"
      },
      // ===== ç¬¬äºŒé¢˜ç¤ºä¾‹ =====
      {
        video: "2.mp4",  // ç¬¬äºŒé¢˜çš„è§†é¢‘
        question: "é—®é¢˜ 2ï¼šæœ¬é¢˜ç›®ä¸»è§’æ˜¯é’¢ç‚®ï¼Œä»–åˆå§‹ä½ç½®æ˜¯bossè„šä¸‹çš„æ–§å¤´ï¼Œä»–çš„ä»»åŠ¡æ˜¯æ–§å³å·¦ï¼Œè¿™æ¬¡æ‰¿ä¼¤ä»–åº”è¯¥ç«™åœ¨å“ªé‡Œï¼Ÿï¼ˆå•é€‰ï¼‰",
        options: [
          { id: "b1", label: "å’Œå°ç¿æ­Œä¸€èµ·" },
          { id: "b2", label: "å¤§é’¢ç‚®æ˜¯å¯¹çš„" }
        ],
        correctAnswers: ["b1"],  // æ­£ç¡®ç­”æ¡ˆæ˜¯é€‰é¡¹Aå’ŒC
        explanation: "æœ¬æ¬¡åˆ†è£‚ä¸ç¬¬ä¸€é¢˜ä¸åŒï¼Œæ˜¯åˆ†è£‚ä¸ºä¸€å·¦ä¸€å³ä¸¤ä¸ªæ‰¿ä¼¤åœˆã€‚å·¦è¾¹çš„äººå‘å·¦ï¼Œå³è¾¹çš„äººå‘å³ã€‚å¤§é’¢ç‚®ä»»åŠ¡æ˜¯å‘å³ã€‚"
      },
      // ===== ç¬¬ä¸‰é¢˜ç¤ºä¾‹ =====
      {
        video: "3.mp4",  // ç¬¬ä¸‰é¢˜çš„è§†é¢‘
        question: "é—®é¢˜ 3ï¼šæœ¬é¢˜ç›®ä¸»è§’ä¾æ—§æ˜¯é’¢ç‚®ï¼Œå¤§é’¢ç‚®çš„ä»»åŠ¡æ˜¯æ–§å³å·¦ï¼Œè¿™æ¬¡æ‰¿ä¼¤ä»–åº”è¯¥ç«™åœ¨å“ªé‡Œï¼Ÿï¼ˆå•é€‰ï¼‰",
        options: [
          { id: "c1", label: "ä»–ä¸€åŠ¨æ²¡åŠ¨ï¼Œä»–æ˜¯å¯¹çš„" },
          { id: "c2", label: "å‘å·¦ç§»åŠ¨ä¸€ä¸ª" },
          { id: "c3", label: "å‘å³ç§»åŠ¨ä¸€ä¸ª" }
        ],
        correctAnswers: ["c2"],  // åªæœ‰ç­”æ¡ˆ2æ­£ç¡®
        explanation: "æœ¬æ¬¡æ‰¿ä¼¤åœˆåˆ†è£‚ä¸ºå·¦è¾¹+åŸåœ°ã€‚å·¦è¾¹çš„äººå‘å·¦ï¼Œå³çš„äººåŸåœ°ï¼Œå¤§é’¢ç‚®ä»»åŠ¡æ˜¯å·¦ï¼Œæ‰€ä»¥åº”è¯¥é€‰B"
      }
      // ç»§ç»­æ·»åŠ æ›´å¤šé¢˜ç›®...
    ];
    // ========== é¢˜ç›®é…ç½®ç»“æŸ ==========

    let currentQuestion = 0;
    let score = 0;
    let answered = false;

    // å¼€å§‹ç­”é¢˜
    function startQuiz() {
      document.getElementById('intro-section').style.display = 'none';
      document.getElementById('quiz-section').style.display = 'block';
      currentQuestion = 0;
      score = 0;
      showQuestion();
    }

    // æ˜¾ç¤ºå½“å‰é¢˜ç›®
    function showQuestion() {
      answered = false;
      const q = quizData[currentQuestion];
      
      // æ›´æ–°è¿›åº¦
      document.getElementById('progress').innerText = `ç¬¬ ${currentQuestion + 1} é¢˜ / å…± ${quizData.length} é¢˜`;
      
      // ç”Ÿæˆé¢˜ç›®HTML
      let html = `
        <div class="video-container">
          <video width="640" controls>
            <source src="${q.video}" type="video/mp4">
            ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾ã€‚
          </video>
        </div>
        <div class="question">
          <p><strong>${q.question}</strong></p>
      `;
      
      q.options.forEach(opt => {
        html += `
          <label>
            <input type="checkbox" name="answer" value="${opt.id}">
            ${opt.label}
          </label>
        `;
      });
      
      html += '</div>';
      
      document.getElementById('question-area').innerHTML = html;
      document.getElementById('feedback-area').innerHTML = '';
      document.getElementById('submit-btn').style.display = 'inline-block';
      document.getElementById('next-btn').style.display = 'none';
    }

    // æäº¤ç­”æ¡ˆ
    function submitAnswer() {
      if (answered) return;
      
      const checkboxes = document.querySelectorAll('input[name="answer"]:checked');
      const selected = Array.from(checkboxes).map(cb => cb.value);
      
      if (selected.length === 0) {
        alert("è¯·å…ˆé€‰æ‹©ç­”æ¡ˆï¼");
        return;
      }
      
      answered = true;
      const q = quizData[currentQuestion];
      
      // æ£€æŸ¥ç­”æ¡ˆ
      const isCorrect = arraysEqual(selected.sort(), q.correctAnswers.sort());
      
      if (isCorrect) {
        score++;
      }
      
      // æ˜¾ç¤ºåé¦ˆ
      let feedbackHtml = '';
      if (isCorrect) {
        feedbackHtml = `<div class="feedback correct">
          <p>âœ… æ­å–œä½ ï¼Œå›ç­”æ­£ç¡®ï¼</p>
          <p><strong>è§£æï¼š</strong>${q.explanation}</p>
        </div>`;
      } else {
        const correctLabels = q.correctAnswers.map(id => 
          q.options.find(opt => opt.id === id)?.label
        ).join('ã€');
        
        const selectedLabels = selected.map(id => 
          q.options.find(opt => opt.id === id)?.label
        ).join('ã€');
        
        feedbackHtml = `<div class="feedback incorrect">
          <p>âŒ å›ç­”é”™è¯¯</p>
          <p><strong>ä½ çš„ç­”æ¡ˆï¼š</strong>${selectedLabels}</p>
          <p><strong>æ­£ç¡®ç­”æ¡ˆï¼š</strong>${correctLabels}</p>
          <p><strong>è§£æï¼š</strong>${q.explanation}</p>
        </div>`;
      }
      
      document.getElementById('feedback-area').innerHTML = feedbackHtml;
      document.getElementById('submit-btn').style.display = 'none';
      
      // åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€é¢˜
      if (currentQuestion < quizData.length - 1) {
        document.getElementById('next-btn').style.display = 'inline-block';
      } else {
        // æœ€åä¸€é¢˜ï¼Œæ˜¾ç¤ºç»“æœæŒ‰é’®
        document.getElementById('next-btn').innerText = 'æŸ¥çœ‹ç»“æœ';
        document.getElementById('next-btn').style.display = 'inline-block';
      }
    }

    // ä¸‹ä¸€é¢˜
    function nextQuestion() {
      currentQuestion++;
      if (currentQuestion < quizData.length) {
        document.getElementById('next-btn').innerText = 'ä¸‹ä¸€é¢˜';
        showQuestion();
      } else {
        showResult();
      }
    }

    // æ˜¾ç¤ºæœ€ç»ˆç»“æœ
    function showResult() {
      document.getElementById('quiz-section').style.display = 'none';
      document.getElementById('result-section').style.display = 'block';
      
      const percentage = Math.round((score / quizData.length) * 100);
      let message = '';
      if (percentage === 100) {
        message = 'ğŸ‰ æ­å–œ';
      } else if (percentage >= 80) {
        message = 'ğŸ‘ é”™';
      } else if (percentage >= 60) {
        message = 'ğŸ’ª é”™äº†';
      } else {
        message = 'ğŸ“š éå¸¸é”™å¤§é”™ç‰¹é”™';
      }
      
      document.getElementById('final-score').innerHTML = `
        <p>ç­”é¢˜å®Œæˆï¼</p>
        <p>ä½ çš„å¾—åˆ†ï¼š${score} / ${quizData.length}</p>
        <p>æ­£ç¡®ç‡ï¼š${percentage}%</p>
        <p>${message}</p>
      `;
    }

    // é‡æ–°ç­”é¢˜
    function restartQuiz() {
      document.getElementById('result-section').style.display = 'none';
      document.getElementById('intro-section').style.display = 'block';
    }

    // è¾…åŠ©å‡½æ•°ï¼šæ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰
    function arraysEqual(a, b) {
      if (a.length !== b.length) return false;
      for (let i = 0; i < a.length; i++) {
        if (a[i] !== b[i]) return false;
      }
      return true;
    }
  </script>
</body>
</html>
